Object.defineProperty(exports,"__esModule",{value:true});var _reactNativeFs=require('react-native-fs');var _reactNativeFs2=_interopRequireDefault(_reactNativeFs);var _reactNativeFetchBlob=require('react-native-fetch-blob');var _reactNativeFetchBlob2=_interopRequireDefault(_reactNativeFetchBlob);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var FileService=function FileService(){var _this=this;_classCallCheck(this,FileService);this._log=function(text){console.log('FileService: '+text);};this._documentPath=function(path){return _reactNativeFs2.default.DocumentDirectoryPath+'/'+_this._filename(path);};this._filename=function(name){return name+'.txt';};this.deleteFile=function(product){var path=_this._documentPath(product);_reactNativeFs2.default.exists(path).then(function(success){if(success){_reactNativeFs2.default.unlink(path).then(function(success){_this._log(path+' deleted');}).catch(function(error){_this._log(error.message);});}else{_this._log(path+' does not exist');}}).catch(function(error){_this._log(error.message);});};this.writeFile=function(product,data){var path=_this._documentPath(product);_reactNativeFs2.default.writeFile(path,data,'utf8').then(function(success){_this._log(path+' written');return path;}).catch(function(error){_this._log(error.message);return null;});};this.emailFile=function(product,email){return new Promise(function(resolve,reject){_reactNativeFetchBlob2.default.fetch('POST','https://sus-app-server.herokuapp.com/email/',{'Content-Type':'multipart/form-data'},[{name:'email',data:email},{name:'product',data:product},{name:'file',filename:_this._filename(product),data:_reactNativeFetchBlob2.default.wrap(_this._documentPath(product)),type:'text/plain'}]).then(function(res){_this._log(res.text());resolve();}).catch(function(error){_this._log(error);reject();});});};};var fs=new FileService();Object.freeze(fs);exports.default=fs;